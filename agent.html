<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil Agent Imobiliar - [Nume Agent]</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc;
        }
        .property-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        .property-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .review-carousel {
            overflow-x: scroll;
            -webkit-overflow-scrolling: touch;
        }
        .review-carousel::-webkit-scrollbar { display: none; }
        .review-carousel { -ms-overflow-style: none; scrollbar-width: none; }
        .review-item { flex-shrink: 0; width: 90%; }
        @media (min-width: 640px) { .review-item { width: calc(50% - 12px); } }
        @media (min-width: 1024px) { .review-item { width: calc(33.333% - 16px); } }

        /* NEW MODAL STYLES (same as index.html) */
        #modal-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.75); z-index: 1000;
            display: none; justify-content: center; align-items: center;
            padding: 20px; overflow-y: auto;
        }
        #modal-content {
            background-color: white; border-radius: 1rem; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
            max-width: 90%; width: 900px; max-height: 95vh; overflow: hidden;
            position: relative; transform: scale(0.95); opacity: 0;
            transition: all 0.25s ease-in-out;
        }
        #modal-backdrop.show #modal-content {
            transform: scale(1); opacity: 1;
        }
        .modal-header-fixed {
            position: sticky; top: 0; z-index: 10; background: white;
            padding: 1.5rem 2rem; border-bottom: 1px solid #e5e7eb;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
        }
        .thumbnail-img {
            cursor: pointer; transition: all 0.2s; border: 3px solid transparent; opacity: 0.7;
        }
        .thumbnail-img.active {
            border-color: #2563eb; opacity: 1;
            box-shadow: 0 0 0 2px white, 0 0 0 4px #3b82f6;
        }
        .thumbnail-img:hover { opacity: 1; }
    </style>
</head>
<body class="antialiased">




	
	<!-- TOP MENU BAR – Fixed at the very top, works on all pages -->
<div class="fixed inset-x-0 top-0 z-50">
    <div class="bg-white shadow-lg border-b border-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">

                <!-- Logo -->
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-700 rounded-lg flex items-center justify-center text-white font-bold text-xl">H</div>
                        <span class="text-xl font-bold text-gray-800 hidden sm:block">Real Estate</span>
                    </a>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#" class="text-gray-700 hover:text-indigo-600 font-medium transition">Contact Us</a>
                    <a href="#" class="text-gray-700 hover:text-indigo-600 font-medium transition">Educational</a>
                    <a href="index.html" class="text-gray-700 hover:text-indigo-600 font-medium transition">Buy</a>
                    <a href="index.html" class="text-gray-700 hover:text-indigo-600 font-medium transition">Rent</a>
                    <a href="agent.html" class="text-gray-700 hover:text-indigo-600 font-medium transition">Find an Agent</a>
                    <a href="crm.html" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-2.5 rounded-lg transition shadow-md">Login</a>
                </div>             
            </div>
        </div>
    </div>
</div>

<!-- This tiny padding pushes your page content below the fixed menu -->
<div class="pt-20"></div>

<!-- Mobile menu toggle (safe & tiny) -->
<script>
    document.getElementById('mobile-menu-btn')?.addEventListener('click', () => {
        document.getElementById('mobile-menu').classList.toggle('hidden');
    });
</script>
	
	
	

<div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
    
    <!-- SECȚIUNEA 1: PROFILUL AGENTULUI -->
    <section id="agent-profile" class="bg-white p-6 md:p-10 rounded-xl shadow-lg mb-12 border-t-4 border-blue-500">
        <div class="flex flex-col md:flex-row items-start md:items-center space-y-6 md:space-y-0 md:space-x-8">
            
            <img id="agent-photo" src="https://placehold.co/150x150/1d4ed8/ffffff?text=M+P" alt="Agent" class="w-32 h-32 rounded-full object-cover shadow-xl ring-4 ring-blue-100">
            
            <div class="flex-1">
                <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 mb-1" id="agent-name">Mihai Popescu</h1>
                <p class="text-xl text-blue-600 font-semibold mb-3" id="agent-title">Specialist Imobiliar Certificat (Broker)</p>
                <p class="text-gray-600 mb-4 max-w-2xl" id="agent-bio">Sunt dedicat să ofer cea mai bună experiență clienților mei, bazându-mă pe 10 ani de experiență în piața rezidențială și comercială din regiunea Cluj-Napoca. Misiunea mea este să fac din tranzacția ta imobiliară una de succes, eficientă și lipsită de stres.</p>
                
                <div class="flex items-center space-x-6 text-sm text-gray-700">
                    <span class="flex items-center"><svg class="w-5 h-5 text-yellow-400 mr-1" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg><span class="font-bold">4.9</span> (34 Recenzii)</span>
                    <span class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c1.657 0 3 .895 3 2s-1.343 2-3 2v2m0 0V8m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="font-bold" id="total-deals">58</span> Tranzacții Finalizate</span>
                </div>
            </div>
            
            <div class="w-full md:w-auto flex flex-col space-y-3">
                <a href="tel:+40722123456" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg text-center transition duration-300">
                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-3.28a19.09 19.09 0 01-14-14V5z"></path></svg>
                    +40 722 123 456
                </a>
                <button class="bg-blue-100 hover:bg-blue-200 text-blue-700 font-semibold py-3 px-6 rounded-lg transition duration-300">Trimite un mesaj (WhatsApp)</button>
            </div>
        </div>
    </section>

    <!-- SECȚIUNEA 2: RECENZII -->
    <section class="mb-12">
        <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-6 border-b pb-2">Ce spun clienții mei</h2>
        
        <div class="relative">
            <button id="scroll-left" class="absolute left-0 top-1/2 -mt-6 z-10 p-3 bg-white rounded-full shadow-lg hover:bg-gray-100 transition duration-300 transform -translate-x-1/2">
                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
            </button>

            <div id="reviews-container" class="review-carousel flex space-x-6 pb-4"><p class="text-gray-500">Se încarcă recenziile...</p></div>

            <button id="scroll-right" class="absolute right-0 top-1/2 -mt-6 z-10 p-3 bg-white rounded-full shadow-lg hover:bg-gray-100 transition duration-300 transform translate-x-1/2">
                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            </button>
        </div>
    </section>

    <!-- SECȚIUNEA 3 & 4: LISTĂRI PROPRIETĂȚI (Portofoliu + Zonă) -->
    <section class="mb-12">
        <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-6 border-b pb-2">Portofoliul Activ (Listările Mele)</h2>
        
        <div id="active-portfolio" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 mb-12">
            <!-- Listările proprii vor fi injectate aici -->
        </div>

        <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-6 border-b pb-2 mt-12">Alte Listări din Zonă (Promovate)</h2>

        <div id="promoted-listings" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
            <!-- Listările din zonă (fără branding concurent) vor fi injectate aici -->
        </div>
    </section>

</div>

<!-- NEW MODAL (same as index.html) -->
<div id="modal-backdrop" onclick="event.target.id==='modal-backdrop' && hideModal()">
    <div id="modal-content" onclick="event.stopPropagation()"></div>
</div>

<script>
    const mockAgent = { name: "Mihai Popescu", title: "Specialist Imobiliar Certificat (Broker)", bio: "Sunt dedicat să ofer cea mai bună experiență clienților mei, bazându-mă pe 10 ani de experiență în piața rezidențială și comercială din regiunea Cluj-Napoca. Misiunea mea este să fac din tranzacția ta imobiliară una de succes, eficientă și lipsită de stres.",
			deals: 58,
			phone: "+40 722 123 456",
			photoUrl: "https://placehold.co/150x150/1d4ed8/ffffff?text=M+P" };
    const mockReviews = [  { client: "Andrei D.", rating: 5, text: "Mihai a fost excepțional! A vândut apartamentul în 3 săptămâni la un preț peste așteptări. Recomand cu încredere profesionalismul său."},
            { client: "Ioana C.", rating: 5, text: "Foarte prompt și comunicativ. Ne-a ajutat să găsim casa perfectă pentru familia noastră, gestionând tot procesul cu mare atenție la detalii."},
            { client: "Florin V.", rating: 4, text: "Un bun negociator. Aș fi vrut mai multă viteză în documentație, dar per total, o experiență pozitivă."},
            { client: "Elena B.", rating: 5, text: "Cel mai bun agent cu care am lucrat. Cunoștea piața perfect și ne-a oferit sfaturi extrem de valoroase."},
            { client: "George M.", rating: 5, text: "Servicii de înaltă calitate, de la prima vizionare până la semnarea finală. Profesionalismul său este incontestabil."},
            { client: "Maria S.", rating: 5, text: "Un partener de încredere! A depășit toate așteptările, rezolvând rapid orice problemă apărută."}, ];
    const mockProperties = [
        { id: 1, title: "Apartament 3 camere, Centru", price: "185,000 €", location: "Cluj-Napoca, Ultracentral", surface: "85 mp", type: "Vânzare", description: "Apartament spațios, complet renovat, situat în inima orașului. Ideal pentru o familie sau investiție.", rooms: 3, floor: "2/5", images: ["https://placehold.co/800x600/10b981/ffffff?text=Vedere+Living","https://placehold.co/800x600/34d399/ffffff?text=Bucatarie+Modern","https://placehold.co/800x600/6ee7b7/ffffff?text=Dormitor+Matrimonial","https://placehold.co/800x600/065f46/ffffff?text=Baie+Eleganta"] },
        { id: 2, title: "Vilă Modernă, Finișaje Premium", price: "350,000 €", location: "Florești, Zona Deal", surface: "150 mp", type: "Vânzare", description: "Vilă tip duplex cu design contemporan, grădină generoasă și vedere panoramică.", rooms: 5, floor: "P+1", images: ["https://placehold.co/800x600/f59e0b/ffffff?text=Vila+Exterior","https://placehold.co/800x600/fbbf24/ffffff?text=Piscina"] },
        { id: 3, title: "Studio de Închiriat, Zona Universitate", price: "450 €/lună", location: "Cluj-Napoca, Mărăști", surface: "38 mp", type: "Închiriere", description: "Studio modern, aproape de facultăți și mijloace de transport.", rooms: 1, floor: "4/7", images: ["https://placehold.co/800x600/ef4444/ffffff?text=Studio+Principal"] },
        { id: 4, title: "Teren Construibil, Deschidere 20m", price: "80,000 €", location: "Apahida, Lângă Pădure", surface: "1200 mp", type: "Vânzare", description: "Teren perfect pentru construcție, cu toate utilitățile la hotar.", rooms: "-", floor: "-", images: ["https://placehold.co/800x600/6366f1/ffffff?text=Vedere+Teren"] },
        { id: 5, title: "Apartament 2 Camere, Iulius Mall", price: "110,000 €", location: "Cluj-Napoca, Gheorgheni", surface: "60 mp", type: "Vânzare", description: "Apartament confort 1, bloc reabilitat, la 5 minute de Iulius Mall.", rooms: 2, floor: "3/8", images: ["https://placehold.co/800x600/3b82f6/ffffff?text=Living+2C"] },
        { id: 6, title: "Casă Individuală, 4 Dormitoare", price: "420,000 €", location: "Bacău, Zona Centrală", surface: "180 mp", type: "Vânzare", description: "Casă renovată recent, cu piscină proprie și terasă mare.", rooms: 4, floor: "P+1", images: ["https://placehold.co/800x600/3b82f6/ffffff?text=Casa+Exterior"] },
        { id: 7, title: "Spațiu Comercial, Vad Bun", price: "1,500 €/lună", location: "Oradea, Calea Aradului", surface: "100 mp", type: "Închiriere", description: "Spațiu la parter, cu trafic pietonal intens.", rooms: 2, floor: "P", images: ["https://placehold.co/800x600/3b82f6/ffffff?text=Spatiu+Comercial"] },
        { id: 8, title: "Garsonieră modernă, Bloc Nou", price: "68,000 €", location: "Cluj-Napoca, Bună Ziua", surface: "35 mp", type: "Vânzare", description: "Garsonieră mobilată și utilată, etaj intermediar.", rooms: 1, floor: "5/9", images: ["https://placehold.co/800x600/3b82f6/ffffff?text=Garsoniera+Interior"] },
    ];


    // Functie pentru a genera un card de proprietate (Rămâne neschimbată)
    function createPropertyCard(property, isPromoted = false) {
        const tagColor = property.type === 'Vânzare' ? 'bg-red-500' : 'bg-blue-500';
        const promotedBadge = isPromoted ? `<span class="text-xs font-semibold text-blue-500 mt-2">Promovat de Agent</span>` : '';
        
        // Adaugam data-id si clasa 'open-modal-btn'
        return `
            <div class="property-card bg-white rounded-xl overflow-hidden shadow-lg border border-gray-100 open-modal-btn" data-id="${property.id}">
                <div class="relative h-48 bg-gray-200">
                    <img src="${property.images[0]}" onerror="this.onerror=null;this.src='https://placehold.co/600x400/4f46e5/ffffff?text=Imagine+Indisponibila'" alt="[Imaginea proprietății: ${property.title}]" 
                         class="w-full h-full object-cover">
                    <span class="absolute top-3 left-3 ${tagColor} text-white text-xs font-bold px-3 py-1 rounded-full shadow-md">
                        ${property.type}
                    </span>
                </div>
                <div class="p-4">
                    <h3 class="text-xl font-bold text-gray-900 truncate mb-1">${property.title}</h3>
                    <p class="text-sm text-gray-500 flex items-center mb-3">
                        <svg class="w-4 h-4 mr-1 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.828 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        ${property.location}
                    </p>
                    
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-2xl font-extrabold text-blue-600">${property.price}</span>
                        <span class="text-sm text-gray-600">${property.surface}</span>
                    </div>

                    ${promotedBadge}

                    <button class="w-full mt-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 rounded-lg transition duration-300 pointer-events-none">
                        Vezi Detalii
                    </button>
                </div>
            </div>
        `;
    }

    // Functie pentru a genera un card de recenzie (Rămâne neschimbată)
    function createReviewCard(review) {
        const stars = Array(review.rating).fill('<svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>').join('');
        
        return `
            <div class="review-item bg-white p-6 rounded-xl shadow-md border-l-4 border-blue-500">
                <div class="flex mb-3">
                    ${stars}
                </div>
                <p class="text-gray-700 italic mb-4">"${review.text}"</p>
                <p class="text-sm font-semibold text-gray-800">- ${review.client}</p>
            </div>
        `;
    }


    // =============================================
    // LOGICA MODALĂ (POP-UP) - ACTUALIZATĂ
    // =============================================
    const propertyModal = document.getElementById('modal-backdrop');
    const modalContent = document.getElementById('modal-content');
    
    // Funcție pentru a schimba imaginea principală
    function changeMainImage(imageUrl, thumbnailElement) {
        document.getElementById('main-image').src = imageUrl;
        
        // Elimină clasa 'active' de pe toate miniaturile
        document.querySelectorAll('.thumbnail-img').forEach(thumb => {
            thumb.classList.remove('active');
        });

        // Adaugă clasa 'active' pe miniatura curentă
        thumbnailElement.classList.add('active');
    }


    function showModal(property) {
        // Randarea datelor
        modalContent.innerHTML = `
            <div class="modal-header-fixed">
                <div class="flex justify-between items-start">
                    <div><h3 class="text-2xl md:text-3xl font-bold text-gray-900 leading-tight">${property.title}</h3></div>
                    <div class="text-right">
                        <div class="text-3xl md:text-4xl font-extrabold text-green-700">${property.price}</div>
                        <div class="text-sm font-semibold text-gray-600 mt-1">Comision: <span class="font-bold text-red-600">3% + TVA</span></div>
                    </div>
                </div>
                <button onclick="hideModal()" class="absolute top-4 right-6 text-gray-500 hover:text-gray-900">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="p-6 md:p-8" style="max-height: calc(95vh - 140px); overflow-y: auto;">
                <div class="mb-8 text-center">
                    <img id="main-image" src="${property.images[0]}" alt="Principală" class="w-full max-w-4xl mx-auto rounded-xl shadow-xl object-cover max-h-96">
                    <div class="flex flex-wrap gap-2 mt-4 justify-center">
                        ${property.images.map((url, index) => `<img src="${url}" alt="Photo ${index + 1}" class="thumbnail-img w-20 h-20 object-cover rounded-lg ${index === 0 ? 'active' : ''}" onclick="changeMainImage('${url}', this);">`).join('')}
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="p-5 bg-gray-50 rounded-xl">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Agent Responsabil</h4>
                        <div class="text-base font-semibold text-gray-900 mb-3">${mockAgent.name}</div>
                        <button onclick="this.outerHTML='<a href=\\'tel:${mockAgent.phone.replace(/ /g, '')}\\' class=\\'w-full px-4 py-2 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 flex items-center justify-center\\'><svg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'16\\' height=\\'16\\' class=\\'mr-2\\' fill=\\'none\\' stroke=\\'currentColor\\' stroke-width=\\'2\\' viewBox=\\'0 0 24 24\\'><path d=\\'M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 3.08 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\\'/></svg>${mockAgent.phone}</a>'" class="w-full px-4 py-2 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700">
                            Afișează Numărul de Telefon
                        </button>
                    </div>
                    <div class="p-5 bg-gray-50 rounded-xl">
                        <h4 class="text-lg font-semibold text-gray-800 mb-3">Specificații</h4>
                        <ul class="space-y-2 text-sm text-gray-700">
                            <li class="flex justify-between"><span>Camere:</span> <span class="font-bold">${property.rooms}</span></li>
                            <li class="flex justify-between"><span>Suprafață:</span> <span class="font-bold">${property.surface}</span></li>
                            <li class="flex justify-between"><span>Etaj:</span> <span class="font-bold">${property.floor}</span></li>
                            <li class="flex justify-between"><span>Tranzacție:</span> <span class="font-bold">${property.type}</span></li>
                        </ul>
                    </div>
                </div>
                <div class="p-5 bg-gray-50 rounded-xl">
                    <h4 class="text-lg font-semibold text-gray-800 mb-3">Descriere Detaliată</h4>
                    <p class="text-sm text-gray-700 leading-relaxed italic">${property.description}</p>
                </div>
            </div>
        `;

        // Afișează modala și BLochează scroll-ul pe body (doar modală scrollabilă)
        propertyModal.style.display = 'flex';
        setTimeout(() => {
            propertyModal.classList.add('show');
            document.body.style.overflow = 'hidden';  // Freeze background scroll
        }, 10);
    }

    function hideModal() {
        propertyModal.classList.remove('show');
        setTimeout(() => {
            propertyModal.style.display = 'none';
            document.body.style.overflow = 'auto';  // Restore page scroll
        }, 300);
    }

    propertyModal.addEventListener('click', (e) => {
        if (e.target === propertyModal) {
            hideModal();
        }
    });


    // =============================================
    // LOGICA CARUSELULUI CIRCULAR (INFINIT ȘI SEAMLESS) - Rămâne neschimbată
    // =============================================
    function setupCircularCarousel(reviewsData) {
        const container = document.getElementById('reviews-container');
        const scrollLeftBtn = document.getElementById('scroll-left');
        const scrollRightBtn = document.getElementById('scroll-right');
        
        if (reviewsData.length === 0) return;

        // 1. Pregătirea datelor pentru caruselul circular
        const visibleItems = 3; 
        const totalOriginalItems = reviewsData.length;
        
        let currentScrollIndex = visibleItems; 
        let isTransitioning = false; 

        // Clonarea Recenziilor: [Clonă Finală] + [Originale] + [Clonă Început]
        const lastClones = reviewsData.slice(-visibleItems).map(r => createReviewCard(r));
        const firstClones = reviewsData.slice(0, visibleItems).map(r => createReviewCard(r));
        const originalItems = reviewsData.map(r => createReviewCard(r));
        container.innerHTML = lastClones.join('') + originalItems.join('') + firstClones.join('');
        
        
        const getItemWidth = () => {
            const item = container.querySelector('.review-item');
            // 24px este spațiul (gap-x-6) + o estimare pentru margine/padding
            return item ? item.offsetWidth + 24 : 0; 
        };

        const itemWidth = getItemWidth();
        setTimeout(() => {
            container.scrollLeft = currentScrollIndex * itemWidth;
            container.style.opacity = 1;
        }, 50); 
        container.style.opacity = 0; 


        // 2. Logica de Scroll pentru Butoane (Seamless)
        const SCROLL_DURATION = 300; 

        const handleScrollSafe = (direction) => {
            if (isTransitioning) return;
            isTransitioning = true;
            
            const itemWidth = getItemWidth();
            
            if (direction === 'right') {
                // Dacă suntem la finalul elementelor originale
                if (currentScrollIndex === visibleItems + totalOriginalItems - 1) { 
                    container.scrollBy({ left: itemWidth, behavior: 'smooth' });
                    
                    setTimeout(() => {
                        // Săritura înapoi la începutul elementelor originale
                        container.scrollLeft = visibleItems * itemWidth; 
                        currentScrollIndex = visibleItems; 
                        isTransitioning = false;
                    }, SCROLL_DURATION);

                } else {
                    container.scrollBy({ left: itemWidth, behavior: 'smooth' });
                    currentScrollIndex++;
                    setTimeout(() => { isTransitioning = false; }, SCROLL_DURATION);
                }
            } else { 
                // Dacă suntem la începutul elementelor originale
                if (currentScrollIndex === visibleItems) { 
                    container.scrollBy({ left: -itemWidth, behavior: 'smooth' });
                    
                    setTimeout(() => {
                        // Săritura la sfârșitul elementelor originale
                        container.scrollLeft = (visibleItems + totalOriginalItems - 1) * itemWidth;
                        currentScrollIndex = visibleItems + totalOriginalItems - 1; 
                        isTransitioning = false;
                    }, SCROLL_DURATION);

                } else {
                    container.scrollBy({ left: -itemWidth, behavior: 'smooth' });
                    currentScrollIndex--;
                    setTimeout(() => { isTransitioning = false; }, SCROLL_DURATION);
                }
            }
        };

        scrollRightBtn.addEventListener('click', () => handleScrollSafe('right'));
        scrollLeftBtn.addEventListener('click', () => handleScrollSafe('left'));


        // 3. Logica de Resetare pentru Scroll Manual (Touch/Drag)
        container.addEventListener('scroll', () => {
            if (isTransitioning) return; 

            const scrollLeft = container.scrollLeft;
            const itemWidth = getItemWidth();
            const totalItems = reviewsData.length;
            
            const startOfOriginals = visibleItems * itemWidth;
            const endOfOriginalsScroll = (visibleItems + totalItems) * itemWidth;

            if (scrollLeft >= endOfOriginalsScroll) {
                container.scrollLeft = startOfOriginals;
            } 
            else if (scrollLeft < startOfOriginals - itemWidth) {
                container.scrollLeft = endOfOriginalsScroll - itemWidth; 
            }
        });
    }


    // =============================================
    // FUNCTIA PRINCIPALĂ DE RANDARE
    // =============================================
    function renderAgentPage() {
        // 1. Randare Profil
        document.getElementById('agent-name').textContent = mockAgent.name;
        document.getElementById('agent-title').textContent = mockAgent.title;
        document.getElementById('agent-bio').textContent = mockAgent.bio;
        document.getElementById('total-deals').textContent = mockAgent.deals;
        document.getElementById('agent-photo').src = mockAgent.photoUrl;

        // 2. Setup Carusel Circular
        setupCircularCarousel(mockReviews);

        // 3. Randare Portofoliu Activ 
        const activePortfolioContainer = document.getElementById('active-portfolio');
        const activeListings = mockProperties.slice(0, 4);
        activePortfolioContainer.innerHTML = activeListings.map(p => createPropertyCard(p, false)).join('');

        // 4. Randare Listări din Zonă 
        const promotedListingsContainer = document.getElementById('promoted-listings');
        const promotedListings = mockProperties.slice(4);
        promotedListingsContainer.innerHTML = promotedListings.map(p => createPropertyCard(p, true)).join('');
        
        // 5. Adaugam event listeners pentru deschiderea modalei
        document.querySelectorAll('.open-modal-btn').forEach(card => {
            card.addEventListener('click', (e) => {
                // Prevenim deschiderea modalei dacă se dă click pe butonul interior
                if (e.target.tagName !== 'BUTTON' && e.target.closest('button') === null) {
                    const propertyId = card.dataset.id;
                    const property = mockProperties.find(p => p.id == propertyId);
                    showModal(property);
                }
            });
        });
    }

    // Rulare la încărcarea paginii
    document.addEventListener('DOMContentLoaded', renderAgentPage);
</script>
</body>
</html>