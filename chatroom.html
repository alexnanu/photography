<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Agenti Imobiliari - Real Estate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        body {font-family: 'Inter', sans-serif; background-color: #f7f9fc;}
        .no-scrollbar::-webkit-scrollbar {display: none;}
        .no-scrollbar {-ms-overflow-style: none; scrollbar-width: none;}
    </style>
</head>
<body class="h-screen flex flex-col">



<!-- FIXED HEADER GROUP -->
<div class="fixed inset-x-0 top-0 z-50 bg-white shadow-md">
    
    <!-- 1. MAIN MENU -->
    <div class="border-b border-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">

                <!-- Logo -->
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-700 rounded-lg flex items-center justify-center text-white font-bold text-xl">H</div>
                        <span class="text-xl font-bold text-gray-800 hidden sm:block">Real Estate</span>
                    </a>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#" class="text-gray-700 hover:text-indigo-600 font-medium transition">Contact Us</a>
                    <a href="#" class="text-gray-700 hover:text-indigo-600 font-medium transition">Educational</a>
                    <a href="#" class="text-gray-700 hover:text-indigo-600 font-medium transition">Profesionisti</a>
                    <a href="#" class="text-gray-700 hover:text-indigo-600 font-medium transition">Analiza De Piata</a>
                    <a href="index.html" class="text-gray-700 hover:text-indigo-600 font-medium transition">Buy</a>
                    <a href="index.html" class="text-gray-700 hover:text-indigo-600 font-medium transition">Rent</a>
                    <a href="profil.html" class="text-gray-700 hover:text-indigo-600 font-medium transition">Profilul meu</a>
                    <a href="agenti.html" class="text-gray-700 hover:text-indigo-600 font-medium transition">Find an Agent</a>
                    <a href="crm.html" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-2.5 rounded-lg transition shadow-md">Login</a>
                </div>             
            </div>
        </div>
    </div>

    <!-- 2. SUBMENU (GLUED) -->
    <div class="bg-gray-50 border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center h-12 space-x-8 overflow-x-auto no-scrollbar" id="main-tabs">
                <button data-tab="my" class="tab-button h-full flex items-center px-1 text-sm font-medium border-b-2 border-indigo-600 text-indigo-600 hover:text-indigo-800 transition whitespace-nowrap">
                    Listările Mele (<span id="property-count">0</span>)
                </button>
                <button data-tab="office" class="tab-button h-full flex items-center px-1 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 transition whitespace-nowrap">
                    Listările Biroului
                </button>
                <button data-tab="county" class="tab-button h-full flex items-center px-1 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 transition whitespace-nowrap">
                    Listările Agenților din Județ
                </button>
				<a href="edit_profil.html" class="tab-button h-full flex items-center px-1 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 transition whitespace-nowrap">
                    Edit Profil
                </a>
				 <a href="chat.html" class="h-full flex items-center px-1 text-sm font-medium border-b-2 border-indigo-600 text-indigo-600 transition whitespace-nowrap">
                        Chat Agenți
                    </a>
                    
            </div>
        </div>
    </div>
</div>
















    <!-- Spacer for fixed header -->
    <div class="pt-28"></div>

    <!-- Main Chat Layout -->
    <div class="flex-grow flex h-full max-w-7xl mx-auto w-full">
        <!-- Sidebar: Chatrooms List -->
        <aside id="sidebar" class="w-full md:w-1/3 lg:w-1/4 bg-white border-r border-gray-200 flex flex-col">
            <!-- Sidebar Header -->
            <div class="p-4 border-b">
                <h2 class="text-xl font-bold text-gray-800">Chat Grupuri</h2>
                <input type="text" placeholder="Caută un oraș sau o zonă..." class="w-full mt-2 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>

            <!-- Chatroom List -->
            <div id="chat-list" class="flex-grow overflow-y-auto">
                <!-- Chatroom items will be dynamically inserted here -->
            </div>
        </aside>

        <!-- Main Content: Chat Window -->
        <main id="chat-window" class="flex-grow flex-col h-full bg-gray-100 hidden md:flex">
            <!-- Chat Header -->
            <header class="bg-white p-4 flex items-center justify-between border-b shadow-sm">
                <div class="flex items-center">
                    <button id="back-to-sidebar" class="md:hidden mr-4 text-gray-600 hover:text-gray-800">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div id="chat-header-info">
                        <h3 class="font-bold text-gray-800">Selectează un grup</h3>
                        <p class="text-sm text-gray-500">Niciun grup selectat</p>
                    </div>
                </div>
                <div class="text-gray-400">
                    <i class="fas fa-ellipsis-v"></i>
                </div>
            </header>

            <!-- Messages Area -->
            <div id="messages-area" class="flex-grow p-4 overflow-y-auto">
                <!-- Messages will be dynamically inserted here -->
                 <div class="flex justify-center items-center h-full">
                    <div class="text-center text-gray-500">
                        <i class="far fa-comments fa-3x mb-2"></i>
                        <p>Selectează un grup pentru a începe conversația.</p>
                    </div>
                </div>
            </div>

            <!-- Message Input -->
            <footer class="bg-white p-4">
                <div class="flex items-center">
                    <input type="text" id="message-input" placeholder="Scrie un mesaj..." class="flex-grow p-3 border rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500" disabled>
                    <button id="send-btn" class="ml-3 bg-indigo-600 text-white p-3 rounded-full hover:bg-indigo-700 disabled:bg-gray-400" disabled>
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </footer>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mockChatrooms = [
                { id: 'cluj_general', name: 'Cluj-Napoca | General', description: 'Discuții generale despre piața imobiliară din Cluj.', members: 128 },
                { id: 'cluj_marasti', name: 'Cluj-Napoca | Mărăști', description: 'Focus pe cartierul Mărăști, cereri și oferte.', members: 45 },
                { id: 'bucuresti_general', name: 'București | General', description: 'Toate discuțiile despre capitală.', members: 312 },
                { id: 'bucuresti_sector1', name: 'București | Sector 1', description: 'Discuții specifice pentru Sectorul 1.', members: 98 },
                { id: 'timisoara_general', name: 'Timișoara | General', description: 'Piața imobiliară din Timișoara.', members: 88 },
                { id: 'iasi_general', name: 'Iași | General', description: 'Noutăți și discuții din Iași.', members: 76 },
                { id: 'constanta_general', name: 'Constanța | General', description: 'Discuții despre piața de pe litoral.', members: 64 },
            ];

            const mockMessages = {
                cluj_general: [
                    { sender: 'Andrei Popa', text: 'Salutare tuturor! Caut un apartament cu 2 camere pentru un client, buget 120.000 EUR. Are cineva ceva?', timestamp: '10:30' },
                    { sender: 'Elena Ionescu', text: 'Salut, Andrei! Am eu ceva în Mănăștur, 55mp, etaj 3, preț 118.000 EUR negociabil. Îți trimit poze pe privat.', timestamp: '10:32' },
                    { sender: 'Mihai Radu', text: 'Se mișcă piața bine săptămâna asta. Am avut 3 vizionări ieri pentru o casă în Florești.', timestamp: '11:15' },
                ],
                bucuresti_sector1: [
                     { sender: 'Cristina Dinu', text: 'Bună dimineața! Ofertă nouă: apartament 3 camere, Aviației, 150.000 EUR. Comision 2%. Colaborăm?', timestamp: '09:15' },
                ],
                // Add more mock messages for other rooms if needed
            };

            const chatList = document.getElementById('chat-list');
            const chatWindow = document.getElementById('chat-window');
            const messagesArea = document.getElementById('messages-area');
            const chatHeaderInfo = document.getElementById('chat-header-info');
            const messageInput = document.getElementById('message-input');
            const sendBtn = document.getElementById('send-btn');
            const sidebar = document.getElementById('sidebar');
            const backToSidebarBtn = document.getElementById('back-to-sidebar');

            function renderChatrooms() {
                chatList.innerHTML = '';
                mockChatrooms.forEach(room => {
                    const roomElement = document.createElement('div');
                    roomElement.className = 'p-4 border-b cursor-pointer hover:bg-gray-50';
                    roomElement.dataset.roomId = room.id;
                    roomElement.innerHTML = `
                        <div class="flex justify-between items-center">
                            <h4 class="font-bold text-gray-800">${room.name}</h4>
                            <span class="text-xs text-white bg-indigo-500 rounded-full px-2 py-0.5">${room.members}</span>
                        </div>
                        <p class="text-sm text-gray-600 truncate">${room.description}</p>
                    `;
                    roomElement.addEventListener('click', () => selectChatroom(room.id));
                    chatList.appendChild(roomElement);
                });
            }

            function selectChatroom(roomId) {
                const room = mockChatrooms.find(r => r.id === roomId);
                if (!room) return;

                // Update header
                chatHeaderInfo.innerHTML = `
                    <h3 class="font-bold text-gray-800">${room.name}</h3>
                    <p class="text-sm text-gray-500">${room.members} membri</p>
                `;

                // Render messages
                renderMessages(roomId);

                // Enable input
                messageInput.disabled = false;
                sendBtn.disabled = false;

                // Handle mobile view
                if (window.innerWidth < 768) {
                    sidebar.classList.add('hidden');
                    chatWindow.classList.remove('hidden');
                }
            }
            
            function renderMessages(roomId) {
                messagesArea.innerHTML = '';
                const messages = mockMessages[roomId] || [];
                if (messages.length === 0) {
                     messagesArea.innerHTML = '<div class="text-center text-gray-500 mt-8">Niciun mesaj în acest grup. Fii primul!</div>';
                     return;
                }

                messages.forEach(msg => {
                    const messageElement = document.createElement('div');
                    messageElement.className = 'mb-4';
                    // Simple differentiation for mock purposes
                    const isOwnMessage = msg.sender === 'Eu'; 
                    messageElement.innerHTML = `
                        <div class="flex ${isOwnMessage ? 'justify-end' : 'justify-start'}">
                            <div class="max-w-md p-3 rounded-lg ${isOwnMessage ? 'bg-indigo-500 text-white' : 'bg-white shadow-md'}">
                                ${!isOwnMessage ? `<p class="text-xs font-bold text-indigo-600 mb-1">${msg.sender}</p>` : ''}
                                <p class="text-sm">${msg.text}</p>
                                <p class="text-xs ${isOwnMessage ? 'text-indigo-200' : 'text-gray-400'} text-right mt-1">${msg.timestamp}</p>
                            </div>
                        </div>
                    `;
                    messagesArea.appendChild(messageElement);
                });
                // Scroll to bottom
                messagesArea.scrollTop = messagesArea.scrollHeight;
            }

            function sendMessage() {
                const text = messageInput.value.trim();
                if (text === '') return;

                const newMessage = {
                    sender: 'Eu', // Mock sender as 'self'
                    text: text,
                    timestamp: new Date().toLocaleTimeString('ro-RO', { hour: '2-digit', minute: '2-digit' })
                };
                
                // This is a mock: it just displays the message, but doesn't save it
                const messageElement = document.createElement('div');
                messageElement.className = 'mb-4';
                messageElement.innerHTML = `
                    <div class="flex justify-end">
                        <div class="max-w-md p-3 rounded-lg bg-indigo-500 text-white">
                            <p class="text-sm">${newMessage.text}</p>
                            <p class="text-xs text-indigo-200 text-right mt-1">${newMessage.timestamp}</p>
                        </div>
                    </div>
                `;
                messagesArea.appendChild(messageElement);
                messageInput.value = '';
                messagesArea.scrollTop = messagesArea.scrollHeight;
                messageInput.focus();
            }

            // Event Listeners
            sendBtn.addEventListener('click', sendMessage);
            messageInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            backToSidebarBtn.addEventListener('click', () => {
                chatWindow.classList.add('hidden');
                sidebar.classList.remove('hidden');
            });


            // Initial Render
            renderChatrooms();
        });
    </script>
</body>
</html>
